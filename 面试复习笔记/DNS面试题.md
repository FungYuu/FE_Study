## DNS 协议是什么

1. DNS 是域名系统是**将域名和IP地址相互映射**的一个分布式数据库，能够使人更方便地访问互联网。
2. **作用**： 将域名解析为IP地址，客户端向DNS服务器（DNS服务器有自己的IP地址）发送域名查询请求，DNS服务器告知客户机Web服务器的 IP 地址。



### DNS同时使用TCP和UDP协议？

**DNS占用53号端口，同时使用TCP和UDP协议。**

1. 在**区域传输**的时候**使用TCP协议**
2. 在**域名解析**的时候**使用UDP协议**



###  DNS完整的查询过程

1. 比如要查询 [www.baidu.com](https://link.juejin.cn?target=http%3A%2F%2Fwww.baidu.com%2F) 的 IP 地址
2. 首先会在浏览器的缓存中查找是否有该域名的缓存
3. 如果不存在就将请求发送到本地的 DNS 服务器中
4. 本地DNS服务器会判断是否存在该域名的缓存，
5. 如果不存在，则向根域名服务器发送一个请求，根域名服务器返回负责 .com 的顶级域名服务器的 IP 地址的列表。
6. 然后本地 DNS 服务器再向其中一个负责 .com 的顶级域名服务器发送一个请求，负责 .com 的顶级域名服务器返回负责 .baidu 的权威域名服务器的 IP 地址列表。
7. 然后本地 DNS 服务器再向其中一个权威域名服务器发送一个请求，最后权威域名服务器返回一个对应的主机名的 IP 地址列表。



### 迭代查询与递归查询

实际上，DNS解析是一个包含迭代查询和递归查询的过程。

- **递归查询**使用递归 查询，用户只需要发出一次查询请求。
- **迭代查询**使用迭代查询，用户需要发出 多次的查询请求。



1. 一般我们向本地 DNS 服务器发送请求的方式就是递归查询

   因为我们只需要发出一次请求，然后本地 DNS 服务器返回给我 们最终的请求结果。

2. 本地 DNS 服务器向其他域名服务器请求的过程是迭代查询的过程，

   因为每一次域名服务器只返回单次 查询的结果，下一级的查询由本地 DNS 服务器自己进行。



